<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body onload="cuentaRegresiva()">
    
    <h1>Test</h1>
    <p class="mensaje">Responda las preguntas en menos de 30 segundos <span id="conteo">00:00:00</span></p> 

    <p>1.¿Cuál es la diferencia entre let y var en JavaScript?</p>
    <input type="text" id="respuesta1">

    <p>2.¿Cómo puedes verificar si una variable tiene un valor nulo (null) en JavaScript?</p>
    <input type="text" id="respuesta2">

    <p>3.¿Qué es el operador ternario en JavaScript y cómo se utiliza?</p>
    <input type="text" id="respuesta3">

    <p>4.¿Cuál es la diferencia entre una función síncrona y asincrónica en JavaScript?</p>
    <input type="text" id="respuesta4">

    <p>5.¿Qué hace el método map() en JavaScript y cómo se utiliza?</p>
    <input type="text" id="respuesta5"><br> <br>

    <button onclick="finalizarTest()">Finalizar</button> 
    <button onclick="recargarTest()">Volver a interntar</button>


    <audio id="audioFinal">
        <source src="sonido/gameover.mp3" type="audio/mpeg">
        sonido no abilitado
    </audio>

    <script>
        let tiempoTerminado;
        let intervaloTiempo;
       function cuentaRegresiva(){
        tiempoTerminado = setTimeout(tiempoCumplido, 30000);
        intervaloTiempo = setInterval(ticTac, 1000);

        document.getElementById("conteo").textContent = 30;
       }

       function ticTac(){
        let tiempo = document.getElementById("conteo").textContent;
        document.getElementById("conteo").textContent = tiempo - 1;
       }

       function tiempoCumplido(){
        clearInterval(intervaloTiempo);
        document.getElementById("conteo").textContent = 0;
        document.getElementById("audioFinal").play();
        alert("GAME OVER: tiempo finalizado. Intenta de nuevo");
       }
       
       function finalizarTest(){
        clearTimeout(tiempoTerminado);
        clearInterval(intervaloTiempo);

        let fecha = new Date();
        let respuesta1 = document.getElementById("respuesta1").value;
        let respuesta2 = document.getElementById("respuesta2").value;
        let respuesta3 = document.getElementById("respuesta3").value;
        let respuesta4 = document.getElementById("respuesta4").value;
        let respuesta5 = document.getElementById("respuesta5").value;

        let mensaje = fecha.toLocaleDateString("es-Es") + "\n" +
                        "1." + respuesta1 + "\n" +
                        "2." + respuesta2 + "\n" +
                        "3." + respuesta3 + "\n" +
                        "4." + respuesta4 + "\n" +
                        "5." + respuesta5 ;

         alert(mensaje);                                
       }

       function recargarTest(){
        location.reload();

       }
    </script>
</body>
</html>